# Receive Messages from Aleph

Receive Messages from the aleph server with WebSockets.

### Usage

```javascript
// Websocket URL:
// "wss://<TARGET SERVER>/api/ws0/messages?
// query_1=value&query_2=value"

// Example url:
// "wss://api2.aleph.im/api/ws0/messages?
// msgType=POST&contentTypes=chat"

const url = 'wss://api2.aleph.im/api/ws0/messages'

const connection = new WebSocket(url) 

connection.onmessage = (e) => { 
  console.log(JSON.parse(e.data))
}
```

**Only one msgType can be queried at a time**. All other **query parameters are comma-separated strings** if multiple values are passed. &#x20;

{% hint style="info" %}
If **multiple values** are passed **for one query parameter**, messages that match **at least one** of the values will be returned.

If **multiple query parameters** are passed, messages that match **ALL** conditions will be returned.
{% endhint %}

###

### Query parameters

| Query parameters                                                                                                                                      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <mark style="color:green;">**msgType**</mark>                                                                                                         | <p>Message type. <br>Value: <code>POST</code>, <code>AGGREGATE</code>, or <code>STORE</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <mark style="color:green;">**addresses**</mark>                                                                                                       | <p>Addresses listed in the </p><ul><li>content address (<code>item_content.address</code>) </li><li><strong>or</strong> sender (<code>sender</code>) attribute of the Message. </li></ul><p></p><p>If <mark style="background-color:yellow;">multiple addresses</mark> are passed, <mark style="background-color:yellow;">any message with one of the queried addresses</mark> in the content address or sender attribute will be returned.</p>                                                                                                                                                                                                                                                                                   |
| <mark style="color:green;">**refs**</mark>                                                                                                            | Refs listed in content refs (`item_content.ref`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <mark style="color:green;">**contentTypes**</mark>                                                                                                    | Message content types (`item_content.type`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <mark style="color:green;">**channels**</mark>                                                                                                        | Message channel.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <mark style="color:green;">**tags**</mark>                                                                                                            | <p>Message content content tag. (<code>item_content.content.tags</code>).</p><p></p><p>If <mark style="background-color:yellow;">multiple tags</mark> are passed, <mark style="background-color:yellow;">messages with at least one of the tags</mark> present in the content content tags will be returned.</p>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <mark style="color:green;">**hashes**</mark>                                                                                                          | hashes listed in the item hash(`item_hash`) or transaction hash (`tx_hash`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <p><mark style="color:green;"><strong>time.startDate</strong></mark><br>&#x26;<br><mark style="color:green;"><strong>time.endDate</strong></mark></p> | <p>Filtering messages on the time attribute (<code>time</code>).</p><p></p><p><mark style="background-color:yellow;">If only the start date</mark> is passed, messages with "time" being <mark style="background-color:yellow;">greater than the start date</mark> will be returned.</p><p></p><p><mark style="background-color:yellow;">If only the end date</mark> is passed, messages with "time" being <mark style="background-color:yellow;">less than the end date</mark> will be returned.<br></p><p><mark style="background-color:yellow;">If both start and end dates</mark> are passed, messages with "time" <mark style="background-color:yellow;">in between</mark> the start date and end date will be returned.</p> |
| <p><mark style="color:green;"><strong>history</strong></mark></p><p><em><code>Default: 10</code></em></p>                                             | <p>The number of Messages to retrieve. </p><p>The default number returned is 10 if none is passed. <br><strong>Minimum #</strong>: 10, <strong>Maximum #</strong>: 200. <mark style="background-color:yellow;">Values outside this range will be ignored.</mark></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
